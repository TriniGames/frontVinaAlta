!function(){function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(t,n,i||t)}function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=l(e);if(t){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"0QBt":function(i,o,s){"use strict";s.r(o),s.d(o,"ProducctionModule",function(){return Te});var d=s("ofXK"),f=s("tyNb"),h=s("0EQZ"),p=s("7+OI"),b=s("XNiG"),v=s("2Vo4"),m=s("LRne"),y=s("IzEk"),g=s("pLZG"),_=s("1G5W"),k=s("fXoL"),x=s("8LU1");s("cH1L");var O,P,w,S,D=function(e){c(o,e);var i=u(o);function o(e,t){var n;return r(this,o),(n=i.call(this)).getChildren=e,n.options=t,n.options&&(n.trackBy=n.options.trackBy),n}return a(o,[{key:"expandAll",value:function(){var e,n=this;this.expansionModel.clear();var i=this.dataNodes.reduce(function(e,i){return[].concat(t(e),t(n.getDescendants(i)),[i])},[]);(e=this.expansionModel).select.apply(e,t(i.map(function(e){return n._trackByValue(e)})))}},{key:"getDescendants",value:function(e){var t=[];return this._getDescendants(t,e),t.splice(1)}},{key:"_getDescendants",value:function(e,t){var i=this;e.push(t);var r=this.getChildren(t);Array.isArray(r)?r.forEach(function(t){return i._getDescendants(e,t)}):Object(p.a)(r)&&r.pipe(Object(y.a)(1),Object(g.a)(Boolean)).subscribe(function(t){var r,o=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==i.return||i.return()}finally{if(s)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i._getDescendants(e,a)}}catch(c){o.e(c)}finally{o.f()}})}}]),o}(function(){function e(){r(this,e),this.expansionModel=new h.c(!0)}return a(e,[{key:"toggle",value:function(e){this.expansionModel.toggle(this._trackByValue(e))}},{key:"expand",value:function(e){this.expansionModel.select(this._trackByValue(e))}},{key:"collapse",value:function(e){this.expansionModel.deselect(this._trackByValue(e))}},{key:"isExpanded",value:function(e){return this.expansionModel.isSelected(this._trackByValue(e))}},{key:"toggleDescendants",value:function(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}},{key:"collapseAll",value:function(){this.expansionModel.clear()}},{key:"expandDescendants",value:function(e){var n,i=this,r=[e];r.push.apply(r,t(this.getDescendants(e))),(n=this.expansionModel).select.apply(n,t(r.map(function(e){return i._trackByValue(e)})))}},{key:"collapseDescendants",value:function(e){var n,i=this,r=[e];r.push.apply(r,t(this.getDescendants(e))),(n=this.expansionModel).deselect.apply(n,t(r.map(function(e){return i._trackByValue(e)})))}},{key:"_trackByValue",value:function(e){return this.trackBy?this.trackBy(e):e}}]),e}()),N=new k.t("CDK_TREE_NODE_OUTLET_NODE"),E=((O=function e(t,n){r(this,e),this.viewContainer=t,this._node=n}).\u0275fac=function(e){return new(e||O)(k.Pb(k.S),k.Pb(N,8))},O.\u0275dir=k.Kb({type:O,selectors:[["","cdkTreeNodeOutlet",""]]}),O),C=function e(t){r(this,e),this.$implicit=t},T=((S=function e(t){r(this,e),this.template=t}).\u0275fac=function(e){return new(e||S)(k.Pb(k.O))},S.\u0275dir=k.Kb({type:S,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),S),j=((w=function(){function e(t,n){r(this,e),this._differs=t,this._changeDetectorRef=n,this._onDestroy=new b.a,this._levels=new Map,this.viewChange=new v.a({start:0,end:Number.MAX_VALUE})}return a(e,[{key:"dataSource",get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)}},{key:"ngOnInit",value:function(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var e=this._nodeDefs.filter(function(e){return!e.when});this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var e,t=this;Object(h.h)(this._dataSource)?e=this._dataSource.connect(this):Object(p.a)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(m.a)(this._dataSource)),e&&(this._dataSubscription=e.pipe(Object(_.a)(this._onDestroy)).subscribe(function(e){return t.renderNodeChanges(e)}))}},{key:"renderNodeChanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,r=arguments.length>3?arguments[3]:void 0,o=n.diff(e);o&&(o.forEachOperation(function(n,o,a){if(null==n.previousIndex)t.insertNode(e[a],a,i,r);else if(null==a)i.remove(o),t._levels.delete(n.item);else{var c=i.get(o);i.move(c,a)}}),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(e,t){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(function(n){return n.when&&n.when(t,e)})||this._defaultNodeDef}},{key:"insertNode",value:function(e,t,n,i){var r=this._getNodeDef(e,t),o=new C(e);o.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==i&&this._levels.has(i)?this._levels.get(i)+1:0,this._levels.set(e,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,o,t),A.mostRecentTreeNode&&(A.mostRecentTreeNode.data=e)}}]),e}()).\u0275fac=function(e){return new(e||w)(k.Pb(k.v),k.Pb(k.i))},w.\u0275cmp=k.Jb({type:w,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var i;1&e&&k.Ib(n,T,1),2&e&&k.mc(i=k.dc())&&(t._nodeDefs=i)},viewQuery:function(e,t){var n;1&e&&k.Ac(E,3),2&e&&k.mc(n=k.dc())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&k.Rb(0,0)},directives:[E],encapsulation:2}),w),A=((P=function(){function e(t,n){r(this,e),this._elementRef=t,this._tree=n,this._destroyed=new b.a,this._dataChanges=new b.a,e.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}return a(e,[{key:"role",get:function(){return"treeitem"},set:function(e){this._elementRef.nativeElement.setAttribute("role",e)}},{key:"data",get:function(){return this._data},set:function(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"_setExpanded",value:function(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded","".concat(e))}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}},{key:"ngOnInit",value:function(){this._parentNodeAriaLevel=function(e){for(var t,n=e.parentElement;n&&(t=void 0,!(null==(t=n.classList)?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")));)n=n.parentElement;return n?n.classList.contains("cdk-nested-tree-node")?Object(x.f)(n.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level","".concat(this.level+1))}},{key:"ngDoCheck",value:function(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}},{key:"ngOnDestroy",value:function(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){this.role="treeitem"}}]),e}()).\u0275fac=function(e){return new(e||P)(k.Pb(k.m),k.Pb(j))},P.\u0275dir=k.Kb({type:P,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),P.mostRecentTreeNode=null,P);var R,I,V,M,B,U,L,K,$,G,q=((V=function(t){c(i,t);var n=u(i);function i(e,t,o){var a;return r(this,i),(a=n.call(this,e,t))._elementRef=e,a._tree=t,a._differs=o,a._elementRef.nativeElement.classList.add("cdk-nested-tree-node"),a}return a(i,[{key:"ngAfterContentInit",value:function(){var e=this;this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);var t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):Object(p.a)(t)&&t.pipe(Object(_.a)(this._destroyed)).subscribe(function(t){return e.updateChildrenNodes(t)}),this.nodeOutlet.changes.pipe(Object(_.a)(this._destroyed)).subscribe(function(){return e.updateChildrenNodes()})}},{key:"ngOnInit",value:function(){e(l(i.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){e(l(i.prototype),"ngDoCheck",this).call(this)}},{key:"ngOnDestroy",value:function(){this._clear(),e(l(i.prototype),"ngOnDestroy",this).call(this)}},{key:"updateChildrenNodes",value:function(e){var t=this._getNodeOutlet();e&&(this._children=e),t&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,t.viewContainer,this._data):this._dataDiffer.diff([])}},{key:"_clear",value:function(){var e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}},{key:"_getNodeOutlet",value:function(){var e=this,t=this.nodeOutlet;return t&&t.find(function(t){return!t._node||t._node===e})}}]),i}(A)).\u0275fac=function(e){return new(e||V)(k.Pb(k.m),k.Pb(j),k.Pb(k.v))},V.\u0275dir=k.Kb({type:V,selectors:[["cdk-nested-tree-node"]],contentQueries:function(e,t,n){var i;1&e&&k.Ib(n,E,1),2&e&&k.mc(i=k.dc())&&(t.nodeOutlet=i)},inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[k.Db([{provide:A,useExisting:V},{provide:N,useExisting:V}]),k.Bb]}),V),Q=((I=function(){function e(t,n){r(this,e),this._tree=t,this._treeNode=n,this._recursive=!1}return a(e,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=Object(x.c)(e)}},{key:"_toggle",value:function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}]),e}()).\u0275fac=function(e){return new(e||I)(k.Pb(j),k.Pb(A))},I.\u0275dir=k.Kb({type:I,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&k.cc("click",function(e){return t._toggle(e)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),I),z=((R=function e(){r(this,e)}).\u0275mod=k.Nb({type:R}),R.\u0275inj=k.Mb({factory:function(e){return new(e||R)}}),R),F=s("FKr1"),J=s("VRyK"),W=s("lJxs"),X=Object(F.t)(Object(F.q)(A)),H=((B=function(t){c(i,t);var n=u(i);function i(e,t,o){var a;return r(this,i),(a=n.call(this,e,t))._elementRef=e,a._tree=t,a.tabIndex=Number(o)||0,a._elementRef.nativeElement.classList.add("mat-tree-node"),a}return a(i,[{key:"ngOnInit",value:function(){e(l(i.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){e(l(i.prototype),"ngDoCheck",this).call(this)}},{key:"ngOnDestroy",value:function(){e(l(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(X)).\u0275fac=function(e){return new(e||B)(k.Pb(k.m),k.Pb(j),k.ac("tabindex"))},B.\u0275dir=k.Kb({type:B,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[k.Db([{provide:A,useExisting:B}]),k.Bb]}),B),Z=((M=function(e){c(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(T)).\u0275fac=function(e){return Y(e||M)},M.\u0275dir=k.Kb({type:M,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[k.Db([{provide:T,useExisting:M}]),k.Bb]}),M),Y=k.Xb(Z),ee=((K=function(t){c(i,t);var n=u(i);function i(e,t,o,a){var c;return r(this,i),(c=n.call(this,e,t,o))._elementRef=e,c._tree=t,c._differs=o,c._disabled=!1,c.tabIndex=Number(a)||0,c._elementRef.nativeElement.classList.add("mat-nested-tree-node"),c}return a(i,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(x.c)(e)}},{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?e:0}},{key:"ngOnInit",value:function(){e(l(i.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){e(l(i.prototype),"ngDoCheck",this).call(this)}},{key:"ngAfterContentInit",value:function(){e(l(i.prototype),"ngAfterContentInit",this).call(this)}},{key:"ngOnDestroy",value:function(){e(l(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(q)).\u0275fac=function(e){return new(e||K)(k.Pb(k.m),k.Pb(j),k.Pb(k.v),k.ac("tabindex"))},K.\u0275dir=k.Kb({type:K,selectors:[["mat-nested-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[k.Db([{provide:q,useExisting:K},{provide:A,useExisting:K},{provide:N,useExisting:K}]),k.Bb]}),K),te=((L=function e(t,n){r(this,e),this.viewContainer=t,this._node=n}).\u0275fac=function(e){return new(e||L)(k.Pb(k.S),k.Pb(N,8))},L.\u0275dir=k.Kb({type:L,selectors:[["","matTreeNodeOutlet",""]],features:[k.Db([{provide:E,useExisting:L}])]}),L),ne=((U=function(e){c(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(j)).\u0275fac=function(e){return ie(e||U)},U.\u0275cmp=k.Jb({type:U,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;1&e&&k.Ac(te,3),2&e&&k.mc(n=k.dc())&&(t._nodeOutlet=n.first)},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[k.Db([{provide:j,useExisting:U}]),k.Bb],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&k.Rb(0,0)},directives:[te],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),U),ie=k.Xb(ne),re=(($=function(e){c(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=Object(x.c)(e)}}]),n}(Q)).\u0275fac=function(e){return oe(e||$)},$.\u0275dir=k.Kb({type:$,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[k.Db([{provide:Q,useExisting:$}]),k.Bb]}),$),oe=k.Xb(re),ae=((G=function e(){r(this,e)}).\u0275mod=k.Nb({type:G}),G.\u0275inj=k.Mb({factory:function(e){return new(e||G)},imports:[[z,F.f],F.f]}),G),ce=function(e){c(n,e);var t=u(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments))._data=new v.a([]),e}return a(n,[{key:"data",get:function(){return this._data.value},set:function(e){this._data.next(e)}},{key:"connect",value:function(e){var t=this;return Object(J.a)(e.viewChange,this._data).pipe(Object(W.a)(function(){return t.data}))}},{key:"disconnect",value:function(){}}]),n}(h.b),se=s("cp0P"),ue=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.Quantity=t,this.Product=n},de=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.Quantity=t,this.Supply=n},le=s("8ceN"),fe=s("D2F5"),he=s("zUzt"),pe=s("/t3+"),be=s("7EHt"),ve=s("pMoy"),me=s("kmnG"),ye=s("qFsG"),ge=s("bTqV"),_e=s("NFeN"),ke=s("pu8Q");function xe(e,t){if(1&e&&(k.Vb(0,"span",13),k.wc(1),k.Ub()),2&e){var n=k.gc(2);k.Eb(1),k.xc(n.error)}}function Oe(e,t){if(1&e){var n=k.Wb();k.Vb(0,"mat-tree-node",8),k.Vb(1,"mat-checkbox",9),k.cc("change",function(e){k.oc(n);var i=t.$implicit;return k.gc().checkSuppliesToProduce(e,i)}),k.wc(2),k.Ub(),k.Vb(3,"mat-form-field",10),k.Vb(4,"mat-label"),k.wc(5,"Cantidad a producir"),k.Ub(),k.Vb(6,"input",11),k.cc("input",function(e){k.oc(n);var i=t.$implicit;return k.gc().evaluateStock(e,i)}),k.Ub(),k.Ub(),k.uc(7,xe,2,1,"span",12),k.Ub()}if(2&e){var i=t.$implicit,r=k.gc();k.Eb(2),k.zc("",i.name," (",i.stock,")"),k.Eb(4),k.jc("disabled",r.disableInputStock(i)),k.Eb(1),k.jc("ngIf",r.maximumProductionPosibleExcedeed)}}function Pe(e,t){1&e&&k.Qb(0,"mat-spinner",21),2&e&&k.jc("diameter",25)}function we(e,t){if(1&e){var n=k.Wb();k.Vb(0,"mat-nested-tree-node"),k.Vb(1,"div",14),k.Vb(2,"button",15),k.Vb(3,"mat-icon",16),k.wc(4),k.Ub(),k.Ub(),k.wc(5),k.Vb(6,"button",17),k.cc("click",function(){k.oc(n);var e=t.$implicit;return k.gc().generateProduction(e)}),k.Vb(7,"span"),k.wc(8,"Producir"),k.Ub(),k.Ub(),k.uc(9,Pe,1,1,"mat-spinner",18),k.Ub(),k.Vb(10,"div",19),k.Rb(11,20),k.Ub(),k.Ub()}if(2&e){var i=t.$implicit,r=k.gc();k.Eb(2),k.Fb("aria-label","Toggle "+i.name),k.Eb(2),k.yc(" ",r.treeControl.isExpanded(i)?"expand_more":"chevron_right"," "),k.Eb(1),k.yc(" ",i.name," "),k.Eb(1),k.jc("disabled",r.disabledProductionButton(i)),k.Eb(3),k.jc("ngIf",r.productionOnGoing),k.Eb(1),k.Hb("example-tree-invisible",!r.treeControl.isExpanded(i))}}var Se,De,Ne,Ee=[{path:"prod",component:(Se=function(){function e(t,n,i){r(this,e),this.productService=t,this.supplyService=n,this.stockService=i,this.panelOpenState=!1,this.treeProductionData=[],this.treeControl=new D(function(e){return e.children}),this.dataSource=new ce,this.itemsToProduce=[],this.unsubscribe$=new b.a,this.supplies=[],this.partialProducts=[],this.productionOnGoing=!1,this.maximumProductionPosibleExcedeed=!1,this.error="No se puede producir mas de lo que esta permitido",this.hasChild=function(e,t){return!!t.children&&t.children.length>0}}return a(e,[{key:"ngOnInit",value:function(){this.getProducts()}},{key:"calculateProductionCapability",value:function(){}},{key:"checkSuppliesToProduce",value:function(e,t){e.checked?this.itemsToProduce.push(t):this.itemsToProduce=this.itemsToProduce.filter(function(e){return e.index!==t.index})}},{key:"disabledProductionButton",value:function(e){var t=this;if(this.productionOnGoing)return this.productionOnGoing;if(this.maximumProductionPosibleExcedeed)return this.maximumProductionPosibleExcedeed;var n=!1;return e.children.forEach(function(e){t.itemsToProduce.some(function(t){return t.index===e.index})&&(n=!0)}),!n}},{key:"disableInputStock",value:function(e){return!this.itemsToProduce.some(function(t){return t.idProduct===e.idProduct})}},{key:"evaluateStock",value:function(e,t){var n=this,i=this.itemsToProduce.find(function(e){return e.idProduct===t.idProduct});i&&(i.quantityToProduce=e.target.value),this.dataSource.data.forEach(function(t){t.children.forEach(function(t){t.stock<e.target.value?(console.log("Excedido Papa"),n.maximumProductionPosibleExcedeed=!0):n.maximumProductionPosibleExcedeed=!1})})}},{key:"generateProduction",value:function(e){var t=this;this.productionOnGoing=!0;var n=this.itemsToProduce.find(function(t){return t.index!==e.index}),i=[],r=[];n.ids.forEach(function(e){var o=t.supplies.find(function(t){return t._id===e});if(o)i.push(o._id);else{var a=t.partialProducts.find(function(t){return t._id===e});a&&r.push(a._id)}t.consumeStock(i,r,n)})}},{key:"getProducts",value:function(){var e=this;this.productService.getProducts().pipe(Object(_.a)(this.unsubscribe$)).subscribe(function(t){e.supplyService.getSupplies().pipe(Object(_.a)(e.unsubscribe$)).subscribe(function(n){e.productService.getPartialProducts().pipe(Object(_.a)(e.unsubscribe$)).subscribe(function(i){e.supplies=n.supply,e.partialProducts=i.product,t.product.forEach(function(t,r){var o=JSON.parse(t.Supplies).map(function(o){return{name:o.SingleSupply.map(function(t){return e.getSupplyName(t,i.product,n.supply)}).join(" - "),ids:o.SingleSupply,idProduct:t._id,index:r,stock:e.getStockAvailable(o.SingleSupply)}});e.treeProductionData.push({name:t.Name,children:o})}),e.dataSource.data=e.treeProductionData})})})}},{key:"getStockAvailable",value:function(e){var t=this,n=[];return e.forEach(function(e){var i=t.supplies.find(function(t){return t._id===e});if(i)n.push(i.Stock);else{var r=t.partialProducts.find(function(t){return t._id===e});n.push(r.Stock)}}),n&&n.length?Math.min.apply(Math,n):0}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"getSupplyName",value:function(e,t,n){var i=t.find(function(t){return t._id===e});return i?i.Name:n.find(function(t){return t._id===e}).Name}},{key:"consumeStock",value:function(e,t,n){var i=this,r=[];e&&e.length&&e.forEach(function(e){r.push(i.stockService.addStockSupply(new de(-Number(n.quantityToProduce),e)))}),t&&t.length&&t.forEach(function(e){r.push(i.stockService.addStockProduct(new ue(-Number(n.quantityToProduce),e)))}),r.push(this.stockService.addStockProduct(new ue(Number(n.quantityToProduce),n.idProduct))),Object(se.a)(r).pipe(Object(_.a)(this.unsubscribe$)).subscribe(function(e){i.productionOnGoing=!1,console.log({results:e})})}}]),e}(),Se.\u0275fac=function(e){return new(e||Se)(k.Pb(le.a),k.Pb(fe.a),k.Pb(he.a))},Se.\u0275cmp=k.Jb({type:Se,selectors:[["app-main-production"]],decls:21,vars:3,consts:[[1,"mat-elevation-z8"],[1,"fill-remaining-space"],[2,"width","485px"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[3,"opened","closed"],[2,"width","500px"],["matTreeNodeToggle",""],[3,"change"],["appearance","fill",2,"font-size","12px","margin-left","14px"],["matInput","","type","number","min","0",3,"disabled","input"],["style","color: red; margin-left: 12px",4,"ngIf"],[2,"color","red","margin-left","12px"],[1,"mat-tree-node"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["mat-raised-button","",2,"font-size","12px","margin-left","12px",3,"disabled","click"],["style","margin-left: 12px",3,"diameter",4,"ngIf"],["role","group"],["matTreeNodeOutlet",""],[2,"margin-left","12px",3,"diameter"]],template:function(e,t){1&e&&(k.Vb(0,"mat-toolbar",0),k.Vb(1,"span",1),k.wc(2,"Produccion"),k.Ub(),k.Ub(),k.Vb(3,"mat-accordion"),k.Vb(4,"mat-expansion-panel"),k.Vb(5,"mat-expansion-panel-header"),k.Vb(6,"mat-panel-title",2),k.wc(7," Botellas "),k.Ub(),k.Vb(8,"mat-panel-description"),k.wc(9," Esto es lo que puedes producir de Botellas "),k.Ub(),k.Ub(),k.Vb(10,"mat-tree",3),k.uc(11,Oe,8,4,"mat-tree-node",4),k.uc(12,we,12,7,"mat-nested-tree-node",5),k.Ub(),k.Ub(),k.Vb(13,"mat-expansion-panel",6),k.cc("opened",function(){return t.panelOpenState=!0})("closed",function(){return t.panelOpenState=!1}),k.Vb(14,"mat-expansion-panel-header"),k.Vb(15,"mat-panel-title",7),k.wc(16," Damajuanas "),k.Ub(),k.Vb(17,"mat-panel-description"),k.wc(18," Esto es lo que puedes producir de Damajuanas "),k.Ub(),k.Ub(),k.Vb(19,"p"),k.wc(20,"I'm visible because I am open"),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Eb(10),k.jc("dataSource",t.dataSource)("treeControl",t.treeControl),k.Eb(2),k.jc("matTreeNodeDefWhen",t.hasChild))},directives:[pe.a,be.a,be.c,be.e,be.f,be.d,ne,Z,H,re,ve.a,me.c,me.f,ye.a,d.j,ee,ge.a,_e.a,te,ke.b],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}"]}),Se)}],Ce=((Ne=function e(){r(this,e)}).\u0275mod=k.Nb({type:Ne}),Ne.\u0275inj=k.Mb({factory:function(e){return new(e||Ne)},imports:[[f.c.forChild(Ee)],f.c]}),Ne),Te=((De=function e(){r(this,e)}).\u0275mod=k.Nb({type:De}),De.\u0275inj=k.Mb({factory:function(e){return new(e||De)},imports:[[d.b,Ce,be.b,pe.b,ae,_e.b,ge.b,ve.b,me.e,ye.b,ke.a]]}),De)}}])}();